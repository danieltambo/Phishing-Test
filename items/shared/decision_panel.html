<!-- =================================================
     Decision Panel (componente reutilizable)
     Permite al usuario clasificar un correo como
     phishing o legítimo y avanzar al siguiente ítem.
     ================================================= -->


<!--
  Estilos específicos del panel de decisión.
  El ancho máximo se alinea con el del correo
  para mantener consistencia visual.
-->

<style>

  /* Contenedor principal del panel de decisión.
     Se centra y se ajusta al ancho del estímulo. */
  .decision-panel {
    margin-top: 10px;
    padding: 0px;
    font-family: inherit;
    max-width: 690px;   /* IGUAL que el mail */
    margin-left: auto;
    margin-right: auto;
    /* border-top: 1px solid #dadce0; */
    }

  .decision-question {
    font-size: 30px;
    font-weight: 500;
    text-align: center;
    margin-bottom: 16px;
    color: #202124;
  }

  /*******************************
  Bug de los botones con SMS
  .decision-buttons {
    display: flex;
    gap: 40px;
    justify-content: space-between;
    margin-bottom: 16px;
    margin-left: 20px;
    margin-right: 20px;
  }
  *************************************/

  .decision-buttons {
    display: flex;
    justify-content: center;   /* SIEMPRE centrados */
    gap: 24px;                 /* separación fija */
    margin-bottom: 16px;
  }

  /*******************************
  Bug de los botones con SMS
  .decision-btn {
    flex: 1;
    padding: 12px 16px;  
    font-size: 16px;    
    font-weight: 600;   
    border-radius: 10px;  
    border: 2px solid #c7cacf; 
    background-color: #ffffff;
    color: #202124;
    cursor: pointer;
    text-align: center;
  }
  *************************************/
.decision-btn {
    width: 260px;              /* ← FIJO */
    padding: 10px 14px;        /* más estrechos */
    font-size: 15px;
    font-weight: 600;
    border-radius: 8px;
    border: 1.5px solid #c7cacf;
    background-color: #ffffff;
    color: #202124;
    text-align: center;
    cursor: pointer;
  }


  .decision-btn em {
    font-style: italic;
    font-weight: 400;
    opacity: 0.85;
  }
  .decision-btn:hover {
    background-color: #f8f9fa;
  }

  .decision-btn.selected {
  border: 3px solid #1a73e8;
  background-color: #eef3fd;
  box-shadow: 0 0 0 2px rgba(26, 115, 232, 0.15);
}

  .decision-next {
    margin-top: 24px;
    display: flex;
    justify-content: center;
  }

  /* Estado inicial del botón "Siguiente": deshabilitado hasta que exista una decisión */
  .next-btn {
  width: 220px;
  padding: 10px 14px;
  font-size: 15px;
  font-weight: 500;
  border-radius: 6px;
  border: 1px solid #dadce0;
  background-color: #ffffff;

  opacity: 0.4;              /* DESACTIVADO */
  pointer-events: none;      /* NO clicable */
  cursor: default;
}

/* Estado habilitado tras seleccionar una opción */
.next-btn.enabled {
  opacity: 1;
  pointer-events: auto;      /* AHORA sí clicable */
  cursor: pointer;
}

.decision-btn em {
  pointer-events: none;
}

</style>

<div class="decision-panel">

  <!--
    Grupo de botones de decisión.
    Gestiona la selección visual y habilita el botón "Siguiente" cuando hay una elección.
  -->
 <!--
      Lógica inline de selección: (onclick)
      - Marca visualmente el botón seleccionado
      - Desmarca el resto
      - Habilita el botón "Siguiente"
  -->
  <div class="decision-buttons"
    onclick="
      const btn = event.target.closest('.decision-btn');
      if (!btn) return;
      if (btn.classList.contains('selected')) return;

      this.querySelectorAll('.decision-btn')
        .forEach(b => b.classList.remove('selected'));

      btn.classList.add('selected');
      document.getElementById('nextBtn').classList.add('enabled');
    "
  >

  <!-- Lo siguiente esta por si acaso, lo de arriba no funciona (que se ha modificado en un bug) 14-01-26
  <div class="decision-buttons" 
        onclick="
        if (event.target.classList.contains('decision-btn')) {
          this.querySelectorAll('.decision-btn')
            .forEach(b => b.classList.remove('selected'));
          event.target.classList.add('selected');
        
          document.getElementById('nextBtn').classList.add('enabled');
        }" 
  >
-->

    <!--  Botones de clasificación del correo.
      El atributo data-track define el evento  que será capturado por el event_logger. -->

    <!-- data-track se utiliza para instrumentar la interacción y registrar la decisión. -->
    <button
      type="button"
      class="decision-btn"
      data-track="decision_phishing"
    >
      Engañoso <em>(phishing)</em> 
    </button>

    <button
      type="button"
      class="decision-btn"
      data-track="decision_legitimo"
    >
      Normal
    </button>
  </div>

  <!-- Botón de avance al siguiente ítem. 
    Permanece deshabilitado hasta que el usuario ha tomado una decisión.
  -->
  <div class="decision-next">
    <button
      type="button"
      class="next-btn"
      id="nextBtn"
      data-track="next_item"
    >
      Siguiente  →
    </button>
  </div>

   <!-- Fix visual para evitar que el iframe del componente corte la parte inferior del panel. -->
   <div> <br><br><br>  </div> 
</div>

